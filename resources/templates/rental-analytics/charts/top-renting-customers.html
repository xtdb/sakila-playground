<div id="top-renting-customers-chart"></div>
<script type="text/javascript">
    vegaEmbed("#top-renting-customers-chart",
    {
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "description": "Bar chart for top customers renting",
        "data": {
            "values": {{ top_renting_customers.result|json|safe }}
        },
        "encoding": {
            "y": {"field": "email", "type": "nominal"},
            "x": {"field": "films_rented", "type": "quantitative", "title": "Number of rented films"}
        },
        "layer": [{
            "mark": "bar"
        }, {
            "mark": {
            "type": "text",
            "align": "left",
            "baseline": "middle",
            "dx": 3
            }
            ,
            "encoding": {
            "text": {"field": "films_rented", "type": "quantitative"}
            }
        }]
        }                
    )
</script>